<!DOCTYPE html>

<!--Page redirect if the user is not logged in -->
<?php
  require $_SERVER['DOCUMENT_ROOT'] . '/Cluk/php/admin/checkManager.php';
?>

<html>
<head> <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>
CLUK Deliveries
</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
 <link rel="stylesheet" type="text/css" href="/Cluk/css/stylesheet.css">
<link rel="stylesheet" type="text/css" href="/Cluk/css/stylesheetSidebarDrivers.css">
<link rel="stylesheet" type="text/css" href="/Cluk/css/stylesheetGrid.css">
<link rel="stylesheet" type="text/css" href="/Cluk/css/stylesheetMap.css">

</head>

 <body>

  <?php
    include($_SERVER['DOCUMENT_ROOT'] . "/Cluk/html/header.html");
  ?>

<?php
  include($_SERVER['DOCUMENT_ROOT'] . "/Cluk/html/sideBarDriver.html");
?>  


        <div id="floating-panel">
                <b>Start/Destination: </b>
                <select id="start">
                  <option value="drum_road, chester">2 Drum Road, Chester-le-Street, DH2 1AB</option>
                 </select>
					<br>
                 <b>Via (optional):</b>
                 <select multiple id="waypoints">
                        <option id="routeVia" value="fisher_lane, newcastle">Seaton Burn Services, Fisher Lane, Newcastle upon Tyne, NE13 6BP</option>
                        <option id="routeVia" value="lagny_street, alnwick">Alnwick Town Centre, 19 Lagny Street, Alnwick, NE66 1LA</option>
                        <option id="routeVia" value="northfield_way, newton">Newton Aycliffe, 4 Northfield Way, Newton Aycliffe, DL5 6EJ </option>
                        <option id="routeVia" value="market_place, thirsk">Thirsk Town Centre, 26 Market Place, Thirsk YO7 1LB</option>
                        <option id="routeVia" value="station_square, withby">Whitby Town Centre, Station Square, Whitby YO21 1DX</option>
                  </select>
				  
				  <br>
				  
				  <b>Via (optional):</b>
                 <select multiple id="waypoints">
                        <option id="routeVia" value="fisher_lane, newcastle">Seaton Burn Services, Fisher Lane, Newcastle upon Tyne, NE13 6BP</option>
                        <option id="routeVia" value="lagny_street, alnwick">Alnwick Town Centre, 19 Lagny Street, Alnwick, NE66 1LA</option>
                        <option id="routeVia" value="northfield_way, newton">Newton Aycliffe, 4 Northfield Way, Newton Aycliffe, DL5 6EJ </option>
                        <option id="routeVia" value="market_place, thirsk">Thirsk Town Centre, 26 Market Place, Thirsk YO7 1LB</option>
                        <option id="routeVia" value="station_square, withby">Whitby Town Centre, Station Square, Whitby YO21 1DX</option>
                  </select>
				  
				  <br>
				  
				  <b>Via (optional):</b>
                 <select multiple id="waypoints">
                        <option id="routeVia" value="fisher_lane, newcastle">Seaton Burn Services, Fisher Lane, Newcastle upon Tyne, NE13 6BP</option>
                        <option id="routeVia" value="lagny_street, alnwick">Alnwick Town Centre, 19 Lagny Street, Alnwick, NE66 1LA</option>
                        <option id="routeVia" value="northfield_way, newton">Newton Aycliffe, 4 Northfield Way, Newton Aycliffe, DL5 6EJ </option>
                        <option id="routeVia" value="market_place, thirsk">Thirsk Town Centre, 26 Market Place, Thirsk YO7 1LB</option>
                        <option id="routeVia" value="station_square, withby">Whitby Town Centre, Station Square, Whitby YO21 1DX</option>
                  </select>
				  
				  <br>
				  
				  <b>Via (optional):</b>
                 <select multiple id="waypoints">
                        <option id="routeVia" value="fisher_lane, newcastle">Seaton Burn Services, Fisher Lane, Newcastle upon Tyne, NE13 6BP</option>
                        <option id="routeVia" value="lagny_street, alnwick">Alnwick Town Centre, 19 Lagny Street, Alnwick, NE66 1LA</option>
                        <option id="routeVia" value="northfield_way, newton">Newton Aycliffe, 4 Northfield Way, Newton Aycliffe, DL5 6EJ </option>
                        <option id="routeVia" value="market_place, thirsk">Thirsk Town Centre, 26 Market Place, Thirsk YO7 1LB</option>
                        <option id="routeVia" value="station_square, withby">Whitby Town Centre, Station Square, Whitby YO21 1DX</option>
                  </select>
				  
				  <br>
				  
				  <b>Via (optional):</b>
                 <select multiple id="waypoints">
                        <option id="routeVia" value="fisher_lane, newcastle">Seaton Burn Services, Fisher Lane, Newcastle upon Tyne, NE13 6BP</option>
                        <option id="routeVia" value="lagny_street, alnwick">Alnwick Town Centre, 19 Lagny Street, Alnwick, NE66 1LA</option>
                        <option id="routeVia" value="northfield_way, newton">Newton Aycliffe, 4 Northfield Way, Newton Aycliffe, DL5 6EJ </option>
                        <option id="routeVia" value="market_place, thirsk">Thirsk Town Centre, 26 Market Place, Thirsk YO7 1LB</option>
                        <option id="routeVia" value="station_square, withby">Whitby Town Centre, Station Square, Whitby YO21 1DX</option>
                  </select>
				  
				  <br>
				  
				  <b>Via (optional):</b>
                 <select multiple id="waypoints">
                        <option id="routeVia" value="fisher_lane, newcastle">Seaton Burn Services, Fisher Lane, Newcastle upon Tyne, NE13 6BP</option>
                        <option id="routeVia" value="lagny_street, alnwick">Alnwick Town Centre, 19 Lagny Street, Alnwick, NE66 1LA</option>
                        <option id="routeVia" value="northfield_way, newton">Newton Aycliffe, 4 Northfield Way, Newton Aycliffe, DL5 6EJ </option>
                        <option id="routeVia" value="market_place, thirsk">Thirsk Town Centre, 26 Market Place, Thirsk YO7 1LB</option>
                        <option id="routeVia" value="station_square, withby">Whitby Town Centre, Station Square, Whitby YO21 1DX</option>
                  </select>
				  
				  <br>
				  
				  <b>End: </b>
				  <select id="end">
				   <option value="drum_road, chester">2 Drum Road, Chester-le-Street, DH2 1AB</option>
                 </select>
				  <br>
				  <input type="submit" id="submit">
                </div>

                      <!--<div id="directionsPanel">
                            Enter a destination and click "Calculate route". <button type="submit">Calculate Route</button>
                        </div>-->

                  
<div id="map"></div>

<div id="right-panel">
        <p>Total Distance: <span id="total"></span></p>
      </div>
  

<script>

        function openNav() {
          document.getElementById("mySidenav").style.width = "250px";
          document.getElementById("main").style.marginLeft = "250px";
          document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
        }
        
        function closeNav() {
          document.getElementById("mySidenav").style.width = "0";
           document.getElementById("main").style.marginLeft = "0";
          document.body.style.backgroundColor = "white";
        }

       
       function initMap(){
        var directionsService = new google.maps.DirectionsService;
        var directionsDisplay = new google.maps.DirectionsRenderer;
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: {lat: 54.859386, lng: -1.574098} //Chester-le-street
         });

         directionsDisplay.setMap(map);

        document.getElementById('submit').addEventListener('click', function() {
          calculateAndDisplayRoute(directionsService, directionsDisplay);
        });
      }

      function calculateAndDisplayRoute(directionsService, directionsDisplay) {
        var waypts = [];
        var checkboxArray = document.getElementById('waypoints');
        for (var i = 0; i < checkboxArray.length; i++) {
          if (checkboxArray.options[i].selected) {
            waypts.push({
              location: checkboxArray[i].value,
              stopover: true
            });
          }
        }

        directionsService.route({
          origin: document.getElementById('start').value,
          destination: document.getElementById('end').value,
          waypoints: waypts,
          optimizeWaypoints: true,
          travelMode: 'DRIVING'
        }, function(response, status) {
          if (status === 'OK') {
            directionsDisplay.setDirections(response);
            var route = response.routes[0];
            var summaryPanel = document.getElementById('directions-panel');
            summaryPanel.innerHTML = '';
            // For each route, display summary information.
            for (var i = 0; i < route.legs.length; i++) {
              var routeSegment = i + 1;
              summaryPanel.innerHTML += '<b>Route Segment: ' + routeSegment +
                  '</b><br>';
              summaryPanel.innerHTML += route.legs[i].start_address + ' to ';
              summaryPanel.innerHTML += route.legs[i].end_address + '<br>';
              summaryPanel.innerHTML += route.legs[i].distance.text + '<br><br>';
            }
          } else {
            window.alert('Directions request failed due to ' + status);
          }
        });
      }
    


/*function displayRoute(origin, destination, service, display, via, waypoints) {
  service.route({
    origin: origin,
    destination: destination,
    via= $("#routeVia").val(),
    waypoints= [],
    if(via){
        waypoints.push({
      location: via,
      stopover: true
    });
    },
    optimizeWaypoints: true,
    travelMode: 'DRIVING',
     avoidTolls: true
  },
  function(response, status) {
    if (status === 'OK') {
      display.setDirections(response);
    } else {
      alert('Could not display directions due to: ' + status);
    }
  });
}*/

function computeTotalDistance(result) {
  var total = 0;
  var myroute = result.routes[0];
  for (var i = 0; i < myroute.legs.length; i++) {
    total += myroute.legs[i].distance.value;
  }
  total = total / 1000;
  document.getElementById('total').innerHTML = total + ' km';
}



</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key= AIzaSyD9Py50BAuNCzCpKpa5rSxRufV41MU5yLo&callback=initMap">
</script>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
</body>
</html>